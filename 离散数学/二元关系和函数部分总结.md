# 二元关系的基础内容

## 有序对和笛卡尔积的定义和基础性质

见集合的总结



## 一些特殊的关系

| 名称         | 符号             | 符号定义                                                     |
| ------------ | ---------------- | ------------------------------------------------------------ |
| 空关系       | $\varnothing$    |                                                              |
| 恒等关系     | $I_A$            | $\{<x,x>\ | \ x\in A\}$<br />注意这里x应该包括$A$里面所有的元素 |
| 全域关系     | $E_A$            | $E_A=A\times A$                                              |
| 小于等于关系 | $L_A$            | $A\subseteq R$<br />$\{ <x,y> \ | x,y\in A,x\le y \ \}$      |
| 整除关系     | $D_A$            | $A\subseteq N_+$<br />$\{ <x,y> \ |  x,y\in A,x|y\ \}$       |
| 包含关系     | $R_{\subseteq }$ | $A$是集合的集合，比如幂集<br />$\{<x,y>\ |x,y,\in A,x\subseteq y\ \}$ |

注：$x|y$表示x是否是y的一个因数，比如$2|4=true,3|5=false$



## 关系的运算及其性质

* 逆关系

  $R$的逆关系$R^{-1}=\{<x,y> \ |<y,x>\in R \ \}$

  逆关系在矩阵上就是转置

* 右复合

  $F\circ G=\{ <x,y> \ | \exist t,s.t. <x,t>\in F \ \and <t,y>\in G \ \ \}$

  右复合在矩阵上一定程度上可以看作矩阵相乘，很容易理解复合没有交换律

  左复合的定义不一样：$F\circ G=\{ <x,y>\ | \  \exist t ,s.t.<y,t>\in G\ \and\ <t,x>\in F \}$

* 限制和像

  限制：$R\upharpoonright A=\{<x,y>\ |\ <x,y>\in R\ \and \ x\in A\}$

  像：$R[A]=\mathrm{ran}(R\upharpoonright A)$

  R在A上的限制$R\upharpoonright A$是R的子关系（子集），而A在R下的像是ran R的子集



* 复合具有结合律

  $(F\circ G)\circ H=F\circ (G\circ H)$

* 复合的逆等于逆的反向复合

  $(F\circ G)^{-1}=G^{-1} \circ F^{-1}$

* 复合对并具有分配律

  $F\circ (G\cup H)=(F\circ G)\cup (F\circ H)$

  $(G\cup H)\circ F=(G\circ F)\cup (H\circ F)$

* 复合对交有单向分配律

  $F\circ (G\cap H)\subseteq (F\circ G)\cap (F\circ H)$

  $(G\cap H)\circ F\subseteq (G\circ F)\cap (H\circ F)$



* 关系的幂运算的定义

  $R^0=I_A$

  $R^{n+1}=R^n \circ R$

  实际上可以推广到$n<0$时，$R^n=(R^{-1})^n$

* 关系的幂运算在图上的应用

  $R^n$可以看作$R$中长为$n$的路径的起止点(课本P118)

* 关系的幂运算的复合

  对于$m,n\in N$

  $R^m\circ R^n=R^{m+n}$

  $(R^{m})^{n}=R^{mn}$

* 关系幂的重复性

  设$A$为n元集，$R$为$A$上的关系，则必然存在$s,t\in N$，使得$R^t=R^s$

  使用鸽巢原理证明

* 关系幂的周期性

  设$R$为$A$上的关系，若存在$s,t\in N$并且$s<t$，使得$R^t=R^s$，则

  * $\forall k\in N,R^{s+k}=R^{t+k}$
  * $\forall k,i\in N , R^{s+kp+i}=R^{s+i}$，其中$k=t-s$
  * 令$S=\{ R^{0},R^1,\cdots ,R^{t-1} \}$，则$\forall q\in N,R^{q}\in S$

  第二个通过第一个证，第三个通过第二个降幂之后证









## 关系

### 关系的表示方式

下面$A=\{1,2,3\},B=\{a,b,c\}$

#### 集合法

就是把所有的序对都表示出来，比如$R=\{<1,2>,<2,2>,<2,3>,<1,3>\}$

#### 矩阵法

如果我们可以把矩阵的每一行都表示一个$A$里的元素，这么一一映射起来，就可以得到矩阵

比如$R=\{a,b,c\}$，那么$R=\{<a,b>,<b,b>,<b,c>,<c,a>\}$，我们可以写成：$M(R)=\left\{\begin{array}{cccc} 0 & 1 & 0 \\ 0 & 1 & 1 \\ 1 & 0 & 0   \end{array}\right\}$

#### 关系图法

就是如果$<x,y>\in R$，那就在图上画一条从$x$到$y$的边



### 逻辑定义

逻辑符号定义：（于剑班要求在$A\not =\varnothing $上考虑，实际上空集上的关系五个性质都满足，但是这里就默认不考虑了）

* 自反性：$\forall x,x\in A\to <x,x>\in R$永真，则称$R$在$A$上自反

  反自反：$\forall x, x\in A\to <x,x>\not\in R$永真，则称$R$在$A$上反自反

  除了空集上的空关系外，自反和反自反是互斥但不互补的

* 对称性：$\forall x\forall y,(x,y\in A\ \and \ <x,y>\in R\to <y,x>\in R)$

  反对称：$\forall x\forall y,(x,y\in A\ \ \and \ x\not= y \ \and \ <x,y>\in R\to <y,x>\not\in R)$ （这里和书上的不一样，不过是等价的）

  对称关系既不互斥也不互补

* 传递性：$\forall x\forall y\forall z(x,y,z\in A\ \and \ <x,y>\in R\ \and\ <y,z>\in R\to <x,z>\in R)$

 





|            | 自反性           | 反自反性                | 对称性             | 反对称性                                                     | 传递性                           |
| ---------- | ---------------- | ----------------------- | ------------------ | ------------------------------------------------------------ | -------------------------------- |
| 集合等价式 | $I_A\subseteq R$ | $R\cap I_A=\varnothing$ | $R=R^{-1}$         | $R\cap R^{-1}\subseteq I_A$                                  | $R\circ R \subseteq R$           |
| 关系矩阵   | 主对角线都是1    | 主对角线都是0           | 矩阵沿主对角线对称 | 对于$i\not=j$<br />$r_{ij}\or r_{ji}=1$则$r_{ij}\and r_{ji}=1$<br />也就是对称的最多只有一个为1 | $M(R^2)$中1的位置$M(R)$均为1     |
| 关系图     | 每个顶点都有自环 | 每个顶点都没自环        | 没有单边           | 没有双向边                                                   | x到y有边，y到z有边，则x到y必有边 |
| 本质       | 考察主对角线元素 | 考察主对角线元素        | 考察非主对角线元素 | 考察非主对角线元素                                           |                                  |





# 二元关系的证明

## 从目标定义开始的证明

试证明：$R_1$和$R_2$都有传递性，那么$R_1\cap R_2$有传递性（课本P140-24）

证：

对于$\forall <x,y>,<y,z>$

$\begin{align} <x,y>\in (R_1\cap R_2)\  \and \   <y,z>\in(R_1\cap R_2) &\Leftrightarrow \ <x,y>\in R_1 \and <x,y>\in R_2\ \and <y,z>\in R_1\ \and <y,z>\in R_2  \\ &\Leftrightarrow\ <x,z>\in R_1\ \and  <x,z>\in R_2 \\ &\Leftrightarrow \ <x,z>\in (R_1\cap R_2)\end{align}$

根据传递性的定义，得证



## 使用二元关系的等价命题证明



试证明：如果$R$具有反对称性，那么$R^{-1}$也具有反对称性

证：

由于$R$具有反对称性，所以$R \cap R^{-1}\subseteq I_A $从而$ R^{-1}\cap (R^{-1})^{-1}\subseteq I_A$，即$R^{-1}$也有反对称性



也可以使用逻辑的方法

试证明：如果$R_1$和$R_2$有自反性，那么$R_1\cup R_2$也有自反性

证：

由于$R_1$和$R_2$有自反性，则$I_A\subseteq R_1,I_A\subseteq R_2$，那么对于$\forall x$，

$\begin{align} I_A\subseteq R_1,I_A\subseteq R_2 &\Rightarrow   (x\in I_A\to x\in R_1)\or (x\in I_A\to x\in R_2) \\ &\Leftrightarrow (\neg x\in I_A)\or x\in R_1\or x\in R_2 \\ &\Leftrightarrow x\in I_A\to x\in(R_1\cup R_2) \\ & \Leftrightarrow I_A\subseteq (R_1\cup R_2)  \end{align}$

得到$R_1\cup R_2$自反



也可以直接转换

试证明：如果$R_1$和$R_2$具有反自反性，那么$R_1\cup R_2$也具有反自反性

证：

由于$R_1,R_2$具有反自反性，所以$R_1\cap I_A=\varnothing,R_2\cap I_A=\varnothing$，又

$(R_1\cup R_2)\cap I_A = (R_1\cap I_A)\cup (R_2\cap I_A)= \varnothing \cup \varnothing =\varnothing$



## 亿些结论

![](资源库/截屏2020-12-09 19.38.11.png)

~~反正我没记~~



# 闭包

## 闭包及二元关系上的闭包

### 定义

* 定义：包含一些指定对象，并且具有某个性质的最小**集合**

* 在二元关系上的闭包的定义：

  设$R$是非空集合$A$上的关系，$R$的自反（对称或传递）闭包是$A$上的关系$R'$，使

  * $R'$是自反（对称或传递）的
  * $R\subseteq R'$
  * 对$A$上$\forall R'',R\subseteq R''$，$R''$具有性质，有$R'\subseteq R''$

  一般把$R$的自反闭包记作$r(R)$，对称闭包记作$s(R)$，传递闭包记作$t(R)$

  这里列出定义是因为证明下面的结论的时候只能直接上定义

* $\begin{cases} r(R)=R\cup R^0 \\ s(R)=R\cup R^{-1} \\ t(R)=R\cup R^2\cup \cdots  \end{cases}$

  这个证明只能利用定义，比如自反即证明$r(R)\subseteq R\cup R^0$及$R\cup R^0 \subseteq r(R)$

  可以利用前两个直接构造自反/对称闭包，构造传递闭包更麻烦，见后

### 闭包的证明

注意这里默认$r(R)$是自反闭包，要证明的是$R\cup I_A=r(R)$

除了课本P127使用的逻辑的证明方法之外，也可以使用逻辑的方式证明：

试证明：$r(R)=R\cup I_A$，**其中$r(R)$是自反闭包**

证：

<1>: $I_A\subseteq R\cup I_A$，也就是$R\cup I_A$是自反的，由闭包的第三条性质，$r(R)\subseteq R\cup I_A$

<2>: 由闭包的第二条性质，$R\subseteq r(R)$，又根据闭包的第一条性质，$I_A\subseteq r(R)$，所以易知$R\cup I_A\subseteq r(R)$

<3>: 所以$r(R)=R\cup I_A$

传递闭包证明用到了一种逻辑表达式上的放缩：如果$A\subseteq B$，则$x\in A \Rightarrow x\in B$，这里不赘述了，**但是建议仔细阅读理解！**

### 构造传递闭包的方法

就是图论中的多源最短路的Floyd算法。。。

```python
# 一开始M是关系矩阵
for k in [1,n]
	for i in [1,n]
    	for j in [1,n]
        	M[i][j]=M[i][j]+M[i][k]*M[k][j] # 是在bool的意义下的+和*
```

这玩意时间复杂度是$O(n^3)$，也就是如果$A$有3个元素的话，这个要算$3^3=27$次，手算累死

从图上理解来说，也可以理解成如果$x$能到$y$，就补上$x\to y$，这么枚举点和路径长度加边就行，但是这么做很不数学

***一定要会传递闭包的构造！会考！***



## 闭包的一些性质

### 闭包性质的等价

~~名字瞎取的~~

$R$是自反的当且仅当$r(R)=R$

$R$是对称的当且仅当$s(R)=R$

$R$是传递的当且仅当$t(R)=R$

这个的证明可以通过自反对称传递性质的等价条件证明

### 有子集关系的两个集合的闭包仍旧有子集关系

设$R_1$和$R_2$是非空集合$A$上的关系，且$R_1\subseteq R_2$，则$r(R_1)\subseteq r(R_2),s(R_1)\subseteq s(R_2),t(R_1)\subseteq t(R_2)$



### 闭包的性质保持

* 若$R$是自反的，则$s(R)$和$t(R)$也是自反的

  若$R$是对称的，则$r(R)$和$t(R)$也是对成的

* 若$R$是传递的，则$r(R)$也是传递的

* 也就是传递关系不能通过构造对称闭包保持



# 等价关系和划分

## 等价

### 等价定义和理解

设$R$是非空集合$A$上的关系，如果$R$同时是自反、对称、传递的，则称$R$为$A$上的等价关系，并且对于$<x,y>\in R$，称$x$等价于$y$，记作$x\sim y$



从矩阵上来说，我们可以通过行列的交换使得关系矩阵变成$\left(\begin{array}{cccc} E_{A_1}& & & \\ & E_{A_2} & & \\ & & \ddots  & \\ & & & E_{A_k}\end{array}\right)$，其中$E_{A_i}$是全域关系

从关系图上来说，等价就是关系图被分成多个不连通的部分，并且每部分之间的两个元素都有关系，每个元素和自己有关系，不同部分的则都没关系

上述的$E_{A_i}$或者“部分”中的元素就称为在同一个等价类里

### 等价类定义

设$R$是非空集合$A$上的等价关系，$\forall x\in A$，令$[x]_R=\{y|y\in A\ \and \ xRy\}$，称$[x]_R$为$x$关于$R$的等价类，简称$x$的等价类，简记为$[x]$或$\overline{x}$

需要注意，等价类是一个集合，并且$x$的等价类就是等价关系$R$下所有与$x$有关的元素构成的集合

从上面对等价的定义的讨论中可以得到，一个等价类里的元素满足全域关系（另外这个是可以通过数学归纳证明的）



### 等价的性质

设$R$是非空集合$A$上的等价关系，

1. $\forall x\in A $，$[x]$是$A$的**非空**子集
2. $\forall x,y\in A$，如果$xRy$，则$[x]=[y]$
3. $\forall x,y,\in A$，如果$<x,y>\not \in R$，则$[x]\cap [y]=\varnothing$
4. $\cup \{[x]|x\in A\}=A$

证明：

1. 用等价关系的自反性证
2. 用等价类的定义+等价关系的对称证
3. 反证
4. 不严谨地说，对于每一个元素$x\in A$，都应该存在一个等价类$E_{A_i}=[x]$使得$x\in E_{A_i}$，因此所有等价类的并应当包含$A$的全部元素



## 商集和划分

### 商集的定义

设$R$是非空集合$A$上的等价关系，以$R$的所有等价类作为元素的集合称为$A$关于$R$的商集，记作$A/R$，即$A/R=\{[x]_R|x\in A\}$

可以看出，**商集是等价类这个集合的集合**，并且根据等价类的性质，商集里面不会有空集合



### 划分的定义

设$A$为非空集合，若$A$的子集族$\pi $（子集族表示$\pi \subseteq P(A)$，是$A$的子集构成的集合）满足

1. $\varnothing \not \in \pi$，即$\pi $的集合元素不空
2. $\forall x\forall y(x,y\in \pi \ \and \ x\not =y \to x\cap y=\varnothing)$，即$\pi $的集合元素没有重复元素
3. $\cup \pi =A$，即$\pi$的所有集合元素并起来没有漏

则称$\pi $为$A$的一个划分，称$\pi $中的元素为$A$的划分块

上面的三个条件可以称为针对$\pi$里的集合的元素“不空”、“不重”和“不漏”



### 划分、商集和等价的关系

很容易注意到，商集是一个划分

$A$上的等价关系与$A$的划分是一一对应的



### 划分的计数问题

于剑班上讲了，所以补充一下，实际上在课本P282页及之后内容会有详细介绍

实际上就是第二类Stirling数：

$n$个**不同的**球恰好放到$r$个**相同的**箱子里的方法数称为第二类Stirling数，记为$S(n,r)$（实际上这个记号是第一类Stirling数！第二类是$\left\{ \begin{array}{cccc}n\\ r\end{array}\right\}$，这里为了方便写就这么用了）

第二类Stirling数有递推公式：

* $S(n,r)=rS(n-1,r)+S(n-1,r-1)$

并且有一些初值和结论

* $S(n,0)=0$，$S(n,1)=1$
* $S(n,2)=2^{n-1}-1$
* $S(n,n-1)=C_{n}^{2}$
* $S(n,n)=1$

划分的种类数就可以看作上面的放球问题

顺便，考试的时候直接先枚举划分数然后枚举对应划分数的方案也许还快些



# 偏序关系

## 定义

### 偏序的定义

设$R$是非空集合$A$上的关系，如果$R$是**自反的、反对称的和传递**的，则称$R$为$A$上的偏序关系，记作$\preccurlyeq$，同时如果$<x,y>\in \preccurlyeq$，则记作$x\preccurlyeq y$，读作“$x$小于等于$y$”

这里的小于等于不是数上的小于等于

另外，根据定义偏序关系也是一个关系，并且这个关系是自反的，也就是$I_A$也是一个偏序关系



### 可比的定义

设$\preccurlyeq$为非空集合$A$上的偏序关系，定义

1. $\forall x,y\in A,x\prec y\Leftrightarrow x\preccurlyeq y\ \and \ x\not= y$，其中$x\prec y$读作“$x$小于$y$”
2. $\forall x,y\in A$，$x$与$y$可比$\Leftrightarrow x\preccurlyeq y\ \or \ y\preccurlyeq x$，即$x$与$y$之间可以定义谁“小于等于”谁

另外对于具有偏序关系$\preccurlyeq$的$A$中的任意两个元素$x,y$，有且仅有三种情况：$x\prec y$、$x=y$、$x$与$y$不可比



### 全序关系定义

设$R$是非空集合$A$上的偏序关系，如果$\forall x,y\in A$，$x$与$y$都是可比的，则称$R$为$A$上的全序关系

举例来说，$Z_+$上的小于等于关系就是全序关系，而整除关系一般不是全序的，如$A=\{1,2,3\}$



### 偏序集的定义

集合$A$和$A$上的偏序关系$\preccurlyeq$构成偏序集，记作$<A,\preccurlyeq>$

很明显，偏序集是一个序对



## 哈斯图

***为了能够严谨表述，我使用了一些图论的知识说明这部分内容，所以可能有亿点难懂，所以如果不能接受可以直接看书上的内容，跳过本部分***



### 覆盖的定义

设$<A,\preccurlyeq>$为偏序集，$\forall x,y\in A$，如果$x\prec y$，且不存在$z\in A$使得$x\prec z\prec y$，则称$y$覆盖$x$

可以想到，在关系图上，满足覆盖关系的两点$s,t$（$s\prec t$）必然直接相连并且不能存在有中间间隔点的路径



### 哈斯图

***哈斯图一定要会画！考试真的会考！***

感性上理解，设集合$H$为$\preccurlyeq$中所有满足覆盖关系的集合，因此$H$也是一个关系

对于关系$H$中的$\forall x,y\in A$，若$x\prec y$，则$x$画在$y$下方

另外，画哈斯图的时候一定要注意**孤立点**！（课本P143的T46-(1)）



这里介绍我自己的哈斯图的画法：

设哈斯图的那个集合为$H$，初始为空

1. 对于原来的偏序$\preccurlyeq$，画出其关系图，设为$G(\preccurlyeq)$，这个主要是用来方便判断覆盖关系的，如果偏序本身很复杂也可以不列

2. 枚举$A$中的元素$s,t$，判断它们满不满足覆盖关系，如果满足就往$H$里加$<s,t>$

3. 上一步结束后就会有一个关系$H$，实际上哈斯图就是按**拓扑排序**分层的$H$的关系图$G(H)$：

   我们定义函数$d(v)$为满足$<u,v>\in H$的序对的数量，实际上在图论中$d$就是入度。先求出初始情况下$d$函数的值

   定义$S$为一个集合，表示将要添加的边，一开始为空

   1. 取出所有$d(u)=0$的点，设这些点为点集$U$，将它们放在当前最底层
   2. 找到所有满足$<x,u>\in S$的边，连接$x$和$u$，并从$S$中删去$<x,u>$
   3. 对每一个$u\in U$，将所有满足$<u,v>\in H$的序对放入$S$，之后让$d(v)$减一
   4. 循环上一步直到所有点都已经在哈斯图上

4. 检查：（如果上面步骤都正确实际上是不需要检查的）

   1. 孤立点
   2. 是否有$x\prec y$，但存在$z\in A$使得$x\prec z\prec y$的情况

看起来很麻烦，实际上**就是拓扑排序的过程**，如果知道拓扑排序就可以在理解的基础上构造了



## 最元、极元、界

### 一些图的知识

对于关系$G$

* 入度：对于某元素$v$，入度是满足$<u,v>\in G$的数量
* 出度：对于某元素$u$，出度是满足$<u,v>\in G$的数量

### 最元和极元的定义

设$<A,\preccurlyeq>$为偏序集，$B\subseteq A,y\in B$

* 若$\forall x (x\in B\to y\preccurlyeq x)$，则称$y$为$B$的最小元
* 若$\forall x(x\in B\to x\preccurlyeq y)$，则称$y$为$B$的最大元
* 若$\forall x(x\in B \ \and \ x\preccurlyeq y\to x=y)$，则称$y$为$B$的极小元
* 若$\forall x (x\in B\ \and \ y\preccurlyeq x\to x=y)$，则称$y$为$B$的极大元

在$B$中元素构成的哈斯图的**子图**上：（实际上讨论最元/极元的时候只需要考虑$B$中元素构成的子图）

|  名字  | 定义的意义                                        | 哈斯子图上的体现  |
| :----: | ------------------------------------------------- | ----------------- |
| 极小元 | 图中能够和$y$比的元素中，比$y$小的只有自己        | 所有入度为0的点   |
| 极大元 | 图中能够和$y$比的元素中，比$y$大的只有自己        | 所有出度为0的点   |
| 最小元 | 图中所有的元素都能与$y$比并且除了$y$自身都比$y$大 | 唯一的入度为0的点 |
| 最大元 | 图中所有的元素都能与$y$比并且除了$y$自身都比$y$小 | 唯一的出度为0的点 |

最元和极元的区别在于，前者必须考虑不可比的点

所以可以看出：最小元最大元不一定存在，极小元极大元不一定唯一，孤立点一定同时是极小元极大元



## 界的定义

设$<A,\preccurlyeq>$为偏序集，$B\subseteq A,y\in A$（注意这里是$y\in A$！）

* 若$\forall x(x\in B\to x\preccurlyeq y)$，则称$y$为$B$的上界
* 若$\forall x(x\in B\to y\preccurlyeq x)$，则称$y$为$B$的下界
* 令$C=\{y|y为B的上界\}$，则称$C$的最小元为$B$的最小上界或上确界
* 令$D=\{y|y为B的下界\}$，则称$D$的最大元为$B$的最大下界或下确界



|  名字  | 定义的意义                             |
| :----: | -------------------------------------- |
|  上界  | $A$里面的某个点大于等于$B$里面每一个点 |
|  下界  | $A$里面的某个点小于等于$B$里面每一个点 |
| 上确界 | 上界中最小的                           |
| 下确界 | 下界中最大的                           |



有如下性质：

* $B$的上界、下界、最小上界、最大上界都可能不存在
* 如果存在，最大下界和最小上界都是唯一的
* $B$的最小元一定是$B$的最大下界，$B$的最大元一定是$B$的最小上界





# 函数

## 函数的一些定义

### 函数的定义

设$F$是二元关系，若$\forall x\in domF$，都存在唯一的$y\in ranF$，使得$<x,y>\in F$成立，那么称$F$为函数

特别的，如果集合$A=domF$，$ranF\subseteq B$，则称$F$是从$A$到$B$的函数，记作$F:A\to B$

***函数是关系！***



可以看出，“$A$到$B$的函数”的条件是比“$F$是函数”严格得多的，前者应该让定义域等于$A$并且值域是$B$的子集



### 函数相等的判断

对于函数$F,G$

由于函数就是特殊的关系，所以函数相等完全转化成集合相等，即$F=G\Leftrightarrow F\subseteq G\ \and\ G\subseteq F$

也可以用听起来更函数的方法：

如果$F$和$G$满足

1. $domF=domG$
2. $\forall x\in domF=domG,F(x)=G(x)$

则称$F=G$



### 函数的集合

所有从$A$到$B$的函数集合记作$B^A$，读作“$B$上$A$”，符号化为：$B^A=\{f|f:A\to B\}$

特别地规定：

* $A=\varnothing,B=\varnothing$，$B^A=\varnothing^\varnothing=\{\varnothing\}$
* $A=\varnothing,B\not =\varnothing$，$B^A=B^\varnothing=\{\varnothing\}$
* $A\not =\varnothing,B=\varnothing$，$B^A=\varnothing ^A=\varnothing$

另外，有$|B^A|=|B|^{|A|}$，原因：$\forall x\in A$，都可以找到$|B|$种可能的对应值，$A$中总共有$|A|$个元素，所以是$|A|$个$|B|$连乘

上面两个可以一起理解记忆，如果理解不了可以强行记（



### 函数的像

设函数$f:A\to B$，$A_1\subseteq A,B_1\subseteq B$

* 令$f(A_1)=\{f(x)|x\in A_1\}$，称$f(A_1)$为$A_1$在$f$下的像，特别地，当$A=A_1$的时称$f(A)$为函数的像

  注意：**像是集合**，函数值$f(x)\in B$而像$f(A_1)\subseteq B$

* 令$f^{-1}(B_1)=\{x|x\in A\ \and \ f(x)\in B_1\}$，则$f^{-1}(B_1)$为$f(B_1)$在$f$下的完全原像

  * 这里的$f^{-1}$不是反函数的意义，实际上很多时候这里的$f^{-1}$的含义是不满足函数的“一个$x$对应一个$f(x)$”的要求的

    举个例子，$A=\{1,2,3\},B=\{a,b\}$，$f=\{<1,a>,<2,a>,<3,b>\}$，定义$B_1=\{a\}$，那么$f^{-1}(B_1)=\{1,2\}$

  * 对于$A_1\subseteq A$，$A_1\subseteq f^{-1}(f(A_1))$，也就是说$f^{-1}(f())$这个操作是扩大集合范围的

    还是上面的例子，定义$A_1=\{1\}$，那么$f(A_1)=\{a\}$，$f^{-1}(f(A_1))=\{1,2\}$，$A_1\subset f^{-1}(f(A_1))$



## 函数的一些性质

### 满射、单射、双射

设$f:A\to B$

1. 若$ranf=B$，则称$f:A\to B$是满射的

   在逻辑上也可以采取如下定义：

   $\forall y\in B$，都可以找到$x\in A$，使得$f(x)=y$

2. 若$\forall y\in ranf$（注意是$ranf$不是$B$），都存在唯一的$x\in A$，使得$f(x)=y$，则称$f:A\to B$是单射的

   在逻辑上也可以采取如下定义：

   如果$\exist x_1,x_2\in A$使得$f(x_1)=f(x_2)$，那么必然有$x_1=x_2$

3. 若$f:A\to B$既是满射也是单射，那么称$f:A\to B$是双射的



### 计数问题

于剑班讲了，所以补充上

设$|A|=n$，$|B|=m$，假设两个都是有限集，定义函数$f:A\to B$

| 条件     | $f$的性质 | 计数                                                         | 理解                                                         |
| -------- | --------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| $n\le m$ | 单射      | $A_{m}^{n}$                                                  | 相当于$m$个元素挑$n$个按顺序排序                             |
| $n\ge m$ | 满射      | $\left\{\begin{array}{cccc} n\\m \end{array}\right\}*m!$<br />乘式左边是第二类Stirling数 | 相当于将$n$个元素划分成$m$个块<br />由于每个块不同所以需要乘一个$m!$ |
| $n=m$    | 双射      | $n!$                                                         | 代入上面的一个公式就行                                       |



### 构造中常用函数

有的时候题目需要构造一些数学上的函数，下面举一些例子

| 抽象要求               | 具体要求          | 例子                        |
| ---------------------- | ----------------- | --------------------------- |
| 开有限到无穷<br />双射 | $A=(-1,1)\\B=R$   | $y=\tan(x*\frac{\pi}{2})$   |
| 闭有限到无穷<br />双射 |                   |                             |
| 无穷到正无穷<br />双射 | $A=R\\ B=R_+$     | $y=e^x$                     |
| 正无穷到无穷<br />双射 | $A=R_+ \\ B=R$    | $y=\ln(x)$                  |
| 无穷到开有限<br />双射 | $A=R \\ B=(-1,1)$ | $y=\frac{2}{\pi}\arctan(x)$ |
| 无穷到闭有限<br />双射 |                   |                             |

~~空着的是没想好~~

另外如果没有单射/满射/双射这种要求的构造其实很简单，常函数这种都行



### 常见具有特殊性质的函数

* 常函数

* 恒等函数

* 单调函数和严格单调函数：注意，这里使用的是偏序的定义

* 特征函数：

  设$A$为集合，对于$\forall A'\subseteq A$，$A'$的特征函数$\chi _{A'}:A\to \{0,1\}$定义为$\chi_{A'}(a)=\begin{cases} 1& a\in A' \\ 0 & a\not\in A' \end{cases}$

* 自然映射：

  设$R$是$A$上的等价关系，令$g:A\to A/R$，$g[a]=[a],\forall a\in A$，称$g$是从$A$到商集$A/R$的自然映射

  自然映射自然在$g(x)=[x]_R$



## 复合函数和反函数

### 复合函数的定义

**函数的复合就是关系的复合**

设$F,G$是函数，则$F\circ G$也是函数，且满足

1. $dom(F\circ G)=\{x|x\in domF\ \and\ F(x)\in domG\}$

   *推论*：设$F,G,H$为函数，则$(F\circ G)\circ H$和$F\circ (G\circ H)$都是函数，且$(F\circ G)\circ H=F\circ (G\circ H)$

2. $\forall x\in dom(F\circ G)$有$F\circ G(x)=G(F(x))$

   注意一下，$G[F(x)]$表示的是以$F(x)$作为$G$的输入得到的函数值，和$F\circ G$意义并不一样，这影响到下面推论的理解：

   *推论*：设$f:A\to B$，$g:B\to C$，则$f\circ g:A\to C$，且$\forall x\in A$（注意上面是$\forall x \in dom(F\circ G)$）都有$f\circ g(x)=g[f(x)]$

3. 于剑班上提到过的一个定义

   $F\circ G=G\bigcirc F=G[F(x)]$，主要是大圆$\bigcirc$和小圆$\circ$之间的关系

另外根据定义也很容易知道：

设$f:A\to B$，则有：$f=f\circ I_A=I_A\circ f$



### 单射、双射、满射在复合时的保持

对于函数$f:A\to B,g:B\to C$

如果$f$和$g$都是单射/满射/双射，那么$f\circ g$也是单射/满射/双射的



### 反函数

对于函数$F$，它的逆**一定是一个二元关系**，但是不一定是函数，只要当$F$本身满足双射的时候其逆才是函数，称为反函数，而且反函数也是双射的



反函数在复合运算上还有一些性质：

设$f:A\to B$是双射的，则$f^{-1}\circ f=I_B,f\circ f^{-1}=I_A$





















